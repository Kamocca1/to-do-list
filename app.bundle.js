(()=>{"use strict";var __webpack_modules__={74:()=>{eval('{\n;// ./src/model/todo.js\n\n\nclass ToDo {\n    #checklist = [];\n    static create(title, description, dueDate, priority, note) {\n        if (!title || typeof title !== "string" || title.trim() === "") {\n            throw new Error("ToDo title must be a non-empty string");\n        }\n        return new ToDo(title.trim(), description, dueDate, priority, note);\n    }\n\n    constructor(title, description, dueDate, priority, note) {\n        this.id = crypto.randomUUID();\n        this.title = title;\n        this.description = description || "";\n        this.dueDate = dueDate || "";\n        this.priority = priority || "low";\n        this.isComplete = false;\n        this.note = note || "";\n    }\n\n    toggleComplete() {\n        this.isComplete = !this.isComplete;\n    }\n\n    update(data) {\n        this.title = data.title || this.title;\n        this.description = data.description || this.description;\n        this.dueDate = data.dueDate || this.dueDate;\n        this.priority = data.priority || this.priority;\n        this.note = data.note || this.note;\n    }\n}\n\n;// ./src/model/project.js\n\n\nclass Project {\n    static #projects = [];\n    #todos = [];\n    #isRemovable = true;\n\n    static get projectsArray() {\n        return this.#projects;\n    }\n    static set projectsArray(value) {\n        if (\n            !Array.isArray(value) ||\n            !value.every((item) => item instanceof Project)\n        ) {\n            throw new Error("Array must contain only Project objects!");\n        }\n        this.#projects = value;\n    }\n\n    static create(name) {\n        if (!name || typeof name !== "string" || name.trim() === "") {\n            throw new Error("Project name must be a non-empty string");\n        }\n        const project = new Project(name.trim(), true);\n        this.projectsArray.push(project);\n        return project;\n    }\n\n    static createDefault(name) {\n        if (this.projectsArray.some((p) => !p.isRemovable)) {\n            return this.projectsArray.find((p) => !p.isRemovable);\n        }\n        const project = new Project(name.trim(), false);\n        this.projectsArray.push(project);\n        return project;\n    }\n\n    static getAll() {\n        return this.projectsArray;\n    }\n    static getById(id) {\n        return this.getAll().find((p) => p.id === id) || null;\n    }\n\n    /**\n     * Delete a project by id, except for the default (non-removable) project.\n     * Returns true if deleted, false if not found or not removable.\n     */\n    static deleteById(id) {\n        const idx = this.projectsArray.findIndex((p) => p.id === id);\n        if (idx === -1) return false;\n        const project = this.projectsArray[idx];\n        if (!project.isRemovable) return false;\n        this.projectsArray.splice(idx, 1);\n        return true;\n    }\n\n    constructor(name, isRemovable) {\n        this.id = crypto.randomUUID();\n        this.name = name;\n        this.#isRemovable = isRemovable;\n    }\n\n    get isRemovable() {\n        return this.#isRemovable;\n    }\n    get todos() {\n        return this.#todos;\n    }\n    set todos(value) {\n        if (\n            !Array.isArray(value) ||\n            !value.every((item) => item instanceof ToDo)\n        ) {\n            throw new Error("Array must contain only ToDo objects!");\n        }\n        this.#todos = value;\n    }\n\n    getToDoAll() {\n        return this.todos;\n    }\n    getToDoById(todoId) {\n        return this.todos.find((t) => t.id === todoId) || null;\n    }\n    addToDo(todo) {\n        this.todos.push(todo);\n    }\n    removeToDo(todoId) {\n        this.todos = this.todos.filter((t) => t.id !== todoId);\n    }\n}\n\n;// ./src/index.js\n\n\n\n// ===== APPLICATION LOGIC (CONTROLLER & VIEW) =====\nconst App = {\n    // --- STATE ---\n    projects: [],\n    currentProjectId: null,\n    editingTodoId: null,\n\n    // --- DOM ELEMENTS ---\n    elements: {\n        projectsList: document.getElementById("projects-list"),\n        newProjectForm: document.getElementById("new-project-form"),\n        newProjectName: document.getElementById("new-project-name"),\n        projectDetails: document.getElementById("project-details"),\n        currentProjectTitle: document.getElementById("current-project-title"),\n        todosContainer: document.getElementById("todos-container"),\n        addTodoBtn: document.getElementById("add-todo-btn"),\n        todoModal: document.getElementById("todo-modal"),\n        todoForm: document.getElementById("todo-form"),\n        modalTitle: document.getElementById("modal-title"),\n        modalCloseBtn: document.getElementById("modal-close-btn"),\n        todoIdInput: document.getElementById("todo-id"),\n        todoTitleInput: document.getElementById("todo-title"),\n        todoDescriptionInput: document.getElementById("todo-description"),\n        todoDueDateInput: document.getElementById("todo-due-date"),\n        todoPriorityInput: document.getElementById("todo-priority"),\n        todoProjectInput: document.getElementById("todo-project"),\n        todoNoteInput: document.getElementById("todo-note"),\n    },\n\n    // --- INITIALIZATION ---\n    init() {\n        this.loadData();\n        this.bindEvents();\n        this.render();\n    },\n\n    // --- DATA HANDLING ---\n    loadData() {\n        // Try to load from localStorage, otherwise create default data\n        const savedProjects = localStorage.getItem("todoAppProjects");\n        if (savedProjects) {\n            const parsedData = JSON.parse(savedProjects);\n            Project.projectsArray = parsedData.map((projData) => {\n                const project = new Project(\n                    projData.name,\n                    projData._Project__isRemovable\n                );\n                project.id = projData.id;\n                project.todos = projData._Project__todos.map((todoData) => {\n                    const todo = new ToDo(\n                        todoData.title,\n                        todoData.description,\n                        todoData.dueDate,\n                        todoData.priority,\n                        todoData.note\n                    );\n                    todo.id = todoData.id;\n                    todo.isComplete = todoData.isComplete;\n                    return todo;\n                });\n                return project;\n            });\n        }\n\n        this.projects = Project.getAll();\n        if (this.projects.length === 0) {\n            const defaultProject = Project.createDefault("Inbox");\n            const todo1 = ToDo.create(\n                "Welcome!",\n                "This is your first to-do.",\n                new Date().toISOString().split("T")[0],\n                "medium",\n                "You can edit or delete this."\n            );\n            defaultProject.addToDo(todo1);\n            this.projects = Project.getAll();\n        }\n\n        const savedCurrentProjectId = localStorage.getItem(\n            "todoAppCurrentProjectId"\n        );\n        this.currentProjectId =\n            savedCurrentProjectId && Project.getById(savedCurrentProjectId)\n                ? savedCurrentProjectId\n                : this.projects[0].id;\n    },\n\n    saveData() {\n        // Using private fields in JSON.stringify needs a replacer or manual object creation.\n        // It\'s simpler to create plain objects for serialization.\n        const serializableProjects = this.projects.map((p) => ({\n            id: p.id,\n            name: p.name,\n            _Project__isRemovable: p.isRemovable,\n            _Project__todos: p.todos.map((t) => ({ ...t })),\n        }));\n        localStorage.setItem(\n            "todoAppProjects",\n            JSON.stringify(serializableProjects)\n        );\n        localStorage.setItem("todoAppCurrentProjectId", this.currentProjectId);\n    },\n\n    // --- EVENT BINDING ---\n    bindEvents() {\n        this.elements.newProjectForm.addEventListener(\n            "submit",\n            this.handleNewProject.bind(this)\n        );\n        this.elements.projectsList.addEventListener(\n            "click",\n            this.handleProjectListClick.bind(this)\n        );\n        this.elements.addTodoBtn.addEventListener(\n            "click",\n            this.handleOpenModalForNew.bind(this)\n        );\n        this.elements.modalCloseBtn.addEventListener("click", () =>\n            this.elements.todoModal.close()\n        );\n        this.elements.todoForm.addEventListener(\n            "submit",\n            this.handleTodoFormSubmit.bind(this)\n        );\n        this.elements.todosContainer.addEventListener(\n            "click",\n            this.handleTodoActions.bind(this)\n        );\n    },\n\n    // --- EVENT HANDLERS ---\n    handleNewProject(e) {\n        e.preventDefault();\n        const name = this.elements.newProjectName.value.trim();\n        if (name) {\n            // Actually create the project and update both Project.projectsArray and this.projects\n            const newProject = Project.create(name);\n            this.projects = Project.getAll();\n            this.currentProjectId = newProject.id;\n            this.elements.newProjectName.value = "";\n            this.render();\n        }\n    },\n\n    handleProjectListClick(e) {\n        // Handle project selection\n        const projectItem = e.target.closest("[data-project-id]");\n        if (projectItem && !e.target.closest(".delete-project-btn")) {\n            this.currentProjectId = projectItem.dataset.projectId;\n            this.render();\n            return;\n        }\n\n        // Handle project deletion\n        if (e.target.closest(".delete-project-btn")) {\n            const projectItem = e.target.closest("[data-project-id]");\n            if (!projectItem) return;\n            const projectId = projectItem.dataset.projectId;\n            const project = Project.getById(projectId);\n            if (!project || !project.isRemovable) {\n                // Should not be possible to delete default project\n                return;\n            }\n            if (\n                confirm(\n                    `Are you sure you want to delete the project "${project.name}" and all its to-dos?`\n                )\n            ) {\n                // Remove from Project.projectsArray directly, since Project.delete is not a function\n                if (Array.isArray(Project.projectsArray)) {\n                    const idx = Project.projectsArray.findIndex(\n                        (p) => p.id === projectId\n                    );\n                    if (idx !== -1) {\n                        Project.projectsArray.splice(idx, 1);\n                    }\n                }\n                // Remove from this.projects\n                this.projects = this.projects.filter((p) => p.id !== projectId);\n                // If the deleted project was selected, switch to the first available project\n                if (this.currentProjectId === projectId) {\n                    this.currentProjectId =\n                        this.projects.length > 0 ? this.projects[0].id : null;\n                }\n                this.render();\n            }\n        }\n    },\n\n    handleOpenModalForNew() {\n        this.editingTodoId = null;\n        this.elements.modalTitle.textContent = "New To-Do";\n        this.elements.todoForm.reset();\n        this.elements.todoIdInput.value = "";\n        this.populateProjectSelector(this.currentProjectId);\n        this.elements.todoModal.showModal();\n    },\n\n    handleTodoFormSubmit(e) {\n        e.preventDefault();\n        const formData = {\n            title: this.elements.todoTitleInput.value,\n            description: this.elements.todoDescriptionInput.value,\n            dueDate: this.elements.todoDueDateInput.value,\n            priority: this.elements.todoPriorityInput.value,\n            note: this.elements.todoNoteInput.value,\n        };\n        const targetProjectId = this.elements.todoProjectInput.value;\n\n        if (this.editingTodoId) {\n            // Update existing ToDo\n            const sourceProject = this.findProjectByTodoId(this.editingTodoId);\n            const todo = sourceProject.getToDoById(this.editingTodoId);\n            todo.update(formData);\n\n            // Move ToDo if project changed\n            if (sourceProject.id !== targetProjectId) {\n                sourceProject.removeToDo(this.editingTodoId);\n                const targetProject = Project.getById(targetProjectId);\n                targetProject.addToDo(todo);\n            }\n        } else {\n            // Create new ToDo\n            const newTodo = ToDo.create(\n                formData.title,\n                formData.description,\n                formData.dueDate,\n                formData.priority,\n                formData.note\n            );\n            const project = Project.getById(targetProjectId);\n            project.addToDo(newTodo);\n        }\n\n        this.elements.todoModal.close();\n        this.render();\n    },\n\n    handleTodoActions(e) {\n        const todoCard = e.target.closest(".todo-card");\n        if (!todoCard) return;\n\n        const todoId = todoCard.dataset.todoId;\n        const project = this.findProjectByTodoId(todoId);\n\n        // Handle Delete\n        if (e.target.closest(".delete-todo-btn")) {\n            if (confirm("Are you sure you want to delete this to-do?")) {\n                project.removeToDo(todoId);\n                this.render();\n            }\n        }\n\n        // Handle Edit\n        if (e.target.closest(".edit-todo-btn")) {\n            this.editingTodoId = todoId;\n            const todo = project.getToDoById(todoId);\n            this.elements.modalTitle.textContent = "Edit To-Do";\n            this.elements.todoIdInput.value = todo.id;\n            this.elements.todoTitleInput.value = todo.title;\n            this.elements.todoDescriptionInput.value = todo.description;\n            this.elements.todoDueDateInput.value = todo.dueDate;\n            this.elements.todoPriorityInput.value = todo.priority;\n            this.elements.todoNoteInput.value = todo.note;\n            this.populateProjectSelector(project.id);\n            this.elements.todoModal.showModal();\n        }\n\n        // Handle Toggle Complete\n        if (e.target.closest(".toggle-complete-btn")) {\n            const todo = project.getToDoById(todoId);\n            todo.toggleComplete();\n            this.render();\n        }\n\n        // Handle Expand/Collapse\n        if (e.target.closest(".todo-header")) {\n            const details = todoCard.querySelector(".todo-details");\n            if (details) details.classList.toggle("hidden");\n        }\n    },\n\n    // --- UTILITY METHODS ---\n    findProjectByTodoId(todoId) {\n        return this.projects.find((p) => p.getToDoById(todoId));\n    },\n\n    populateProjectSelector(selectedProjectId) {\n        this.elements.todoProjectInput.innerHTML = "";\n        this.projects.forEach((p) => {\n            const option = document.createElement("option");\n            option.value = p.id;\n            option.textContent = p.name;\n            if (p.id === selectedProjectId) {\n                option.selected = true;\n            }\n            this.elements.todoProjectInput.appendChild(option);\n        });\n    },\n\n    // --- RENDER METHODS ---\n    render() {\n        this.renderProjects();\n        this.renderTodos();\n        this.saveData();\n    },\n\n    renderProjects() {\n        this.elements.projectsList.innerHTML = "";\n        this.projects.forEach((project) => {\n            const isActive = project.id === this.currentProjectId;\n            const activeClasses = isActive\n                ? "bg-blue-100 text-blue-600 font-semibold"\n                : "hover:bg-slate-100";\n            const projectEl = document.createElement("li");\n            projectEl.dataset.projectId = project.id;\n            projectEl.className = `p-2 rounded-md cursor-pointer transition-colors flex items-center justify-between gap-2 ${activeClasses}`;\n            // Project name span for click selection\n            const nameSpan = document.createElement("span");\n            nameSpan.textContent = project.name;\n            nameSpan.className = "flex-1";\n            projectEl.appendChild(nameSpan);\n\n            // Add delete button if project is removable (not default)\n            if (project.isRemovable) {\n                const deleteBtn = document.createElement("button");\n                deleteBtn.className =\n                    "delete-project-btn ml-2 p-1 text-slate-400 hover:text-red-600 transition-colors";\n                deleteBtn.title = "Delete project";\n                deleteBtn.innerHTML = `\n                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">\n                        <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd" />\n                    </svg>\n                `;\n                projectEl.appendChild(deleteBtn);\n            }\n\n            this.elements.projectsList.appendChild(projectEl);\n        });\n    },\n\n    renderTodos() {\n        const project = Project.getById(this.currentProjectId);\n        if (!project) {\n            this.elements.currentProjectTitle.textContent =\n                "No Project Selected";\n            this.elements.todosContainer.innerHTML =\n                \'<p class="text-slate-500">Select a project to see your to-dos.</p>\';\n            return;\n        }\n\n        this.elements.currentProjectTitle.textContent = project.name;\n        this.elements.todosContainer.innerHTML = "";\n\n        if (project.getToDoAll().length === 0) {\n            this.elements.todosContainer.innerHTML =\n                \'<p class="text-slate-500 text-center mt-8">No to-dos in this project. Add one!</p>\';\n            return;\n        }\n\n        project\n            .getToDoAll()\n            .sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate))\n            .forEach((todo) => {\n                const priorityClasses = {\n                    high: "border-red-400",\n                    medium: "border-yellow-400",\n                    low: "border-green-400",\n                };\n                const isOverdue =\n                    !todo.isComplete &&\n                    todo.dueDate &&\n                    new Date(todo.dueDate) < new Date();\n                const overdueClass = isOverdue ? "bg-red-50" : "";\n                const completedClass = todo.isComplete\n                    ? "opacity-60 line-through"\n                    : "";\n\n                const todoCard = document.createElement("div");\n                todoCard.className = `todo-card border-l-4 p-4 rounded-md bg-white shadow-sm transition-all ${\n                    priorityClasses[todo.priority]\n                } ${overdueClass}`;\n                todoCard.dataset.todoId = todo.id;\n\n                let formattedDate = "No due date";\n                if (todo.dueDate) {\n                    try {\n                        formattedDate = window.dateFns.format(\n                            new Date(todo.dueDate),\n                            "MMM dd, yyyy"\n                        );\n                    } catch (e) {\n                        console.error("Could not format date:", todo.dueDate);\n                    }\n                }\n\n                todoCard.innerHTML = `\n                        <div class="todo-header flex justify-between items-start cursor-pointer">\n                            <div class="flex items-center gap-3">\n                                <button class="toggle-complete-btn text-xl">${\n                                    todo.isComplete ? "✅" : "🔲"\n                                }</button>\n                                <div class="${completedClass}">\n                                    <h4 class="font-semibold text-lg">${\n                                        todo.title\n                                    }</h4>\n                                    <p class="text-sm text-slate-500">${formattedDate}</p>\n                                </div>\n                            </div>\n                            <div class="flex items-center gap-2">\n                                <button class="edit-todo-btn p-1 text-slate-500 hover:text-blue-600 transition-colors">\n                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" /><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" /></svg>\n                                </button>\n                                <button class="delete-todo-btn p-1 text-slate-500 hover:text-red-600 transition-colors">\n                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd" /></svg>\n                                </button>\n                            </div>\n                        </div>\n                        <div class="todo-details hidden mt-4 pl-10 border-t pt-4">\n                             <p class="text-slate-600 mb-2">${\n                                 todo.description || "No description."\n                             }</p>\n                             ${\n                                 todo.note\n                                     ? `<p class="text-sm bg-yellow-100 p-2 rounded-md"><strong>Note:</strong> ${todo.note}</p>`\n                                     : ""\n                             }\n                        </div>\n                    `;\n                this.elements.todosContainer.appendChild(todoCard);\n            });\n    },\n};\n\n// --- Start the application ---\nApp.init();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsT0FBTztBQUM3QztBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsNEJBQTRCLElBQUk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLE9BQU87QUFDbkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkhBQTZILGNBQWM7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEVBQUUsYUFBYTtBQUNqQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyw4Q0FBOEMsZUFBZTtBQUM3RDtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLHdFQUF3RSxjQUFjO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBLGlIQUFpSCxVQUFVO0FBQzNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsS0FBSztBQUNMOztBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL21vZGVsL3RvZG8uanM/YjMxNyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL21vZGVsL3Byb2plY3QuanM/MGMwMyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSBcImRhdGUtZm5zXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvRG8ge1xuICAgICNjaGVja2xpc3QgPSBbXTtcbiAgICBzdGF0aWMgY3JlYXRlKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIG5vdGUpIHtcbiAgICAgICAgaWYgKCF0aXRsZSB8fCB0eXBlb2YgdGl0bGUgIT09IFwic3RyaW5nXCIgfHwgdGl0bGUudHJpbSgpID09PSBcIlwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb0RvIHRpdGxlIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVG9Ebyh0aXRsZS50cmltKCksIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgbm90ZSk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgbm90ZSkge1xuICAgICAgICB0aGlzLmlkID0gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24gfHwgXCJcIjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZSB8fCBcIlwiO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHkgfHwgXCJsb3dcIjtcbiAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubm90ZSA9IG5vdGUgfHwgXCJcIjtcbiAgICB9XG5cbiAgICB0b2dnbGVDb21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gIXRoaXMuaXNDb21wbGV0ZTtcbiAgICB9XG5cbiAgICB1cGRhdGUoZGF0YSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gZGF0YS50aXRsZSB8fCB0aGlzLnRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbiB8fCB0aGlzLmRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkYXRhLmR1ZURhdGUgfHwgdGhpcy5kdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gZGF0YS5wcmlvcml0eSB8fCB0aGlzLnByaW9yaXR5O1xuICAgICAgICB0aGlzLm5vdGUgPSBkYXRhLm5vdGUgfHwgdGhpcy5ub3RlO1xuICAgIH1cbn1cbiIsImltcG9ydCBUb0RvIGZyb20gXCIuL3RvZG8uanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCB7XG4gICAgc3RhdGljICNwcm9qZWN0cyA9IFtdO1xuICAgICN0b2RvcyA9IFtdO1xuICAgICNpc1JlbW92YWJsZSA9IHRydWU7XG5cbiAgICBzdGF0aWMgZ2V0IHByb2plY3RzQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwcm9qZWN0cztcbiAgICB9XG4gICAgc3RhdGljIHNldCBwcm9qZWN0c0FycmF5KHZhbHVlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFBcnJheS5pc0FycmF5KHZhbHVlKSB8fFxuICAgICAgICAgICAgIXZhbHVlLmV2ZXJ5KChpdGVtKSA9PiBpdGVtIGluc3RhbmNlb2YgUHJvamVjdClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBcnJheSBtdXN0IGNvbnRhaW4gb25seSBQcm9qZWN0IG9iamVjdHMhXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3Byb2plY3RzID0gdmFsdWU7XG4gICAgfVxuXG4gICAgc3RhdGljIGNyZWF0ZShuYW1lKSB7XG4gICAgICAgIGlmICghbmFtZSB8fCB0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIiB8fCBuYW1lLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvamVjdCBuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb2plY3QgPSBuZXcgUHJvamVjdChuYW1lLnRyaW0oKSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMucHJvamVjdHNBcnJheS5wdXNoKHByb2plY3QpO1xuICAgICAgICByZXR1cm4gcHJvamVjdDtcbiAgICB9XG5cbiAgICBzdGF0aWMgY3JlYXRlRGVmYXVsdChuYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnByb2plY3RzQXJyYXkuc29tZSgocCkgPT4gIXAuaXNSZW1vdmFibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0c0FycmF5LmZpbmQoKHApID0+ICFwLmlzUmVtb3ZhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9qZWN0ID0gbmV3IFByb2plY3QobmFtZS50cmltKCksIGZhbHNlKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0c0FycmF5LnB1c2gocHJvamVjdCk7XG4gICAgICAgIHJldHVybiBwcm9qZWN0O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRBbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RzQXJyYXk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRCeUlkKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbCgpLmZpbmQoKHApID0+IHAuaWQgPT09IGlkKSB8fCBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIHByb2plY3QgYnkgaWQsIGV4Y2VwdCBmb3IgdGhlIGRlZmF1bHQgKG5vbi1yZW1vdmFibGUpIHByb2plY3QuXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGRlbGV0ZWQsIGZhbHNlIGlmIG5vdCBmb3VuZCBvciBub3QgcmVtb3ZhYmxlLlxuICAgICAqL1xuICAgIHN0YXRpYyBkZWxldGVCeUlkKGlkKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMucHJvamVjdHNBcnJheS5maW5kSW5kZXgoKHApID0+IHAuaWQgPT09IGlkKTtcbiAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgcHJvamVjdCA9IHRoaXMucHJvamVjdHNBcnJheVtpZHhdO1xuICAgICAgICBpZiAoIXByb2plY3QuaXNSZW1vdmFibGUpIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5wcm9qZWN0c0FycmF5LnNwbGljZShpZHgsIDEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpc1JlbW92YWJsZSkge1xuICAgICAgICB0aGlzLmlkID0gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy4jaXNSZW1vdmFibGUgPSBpc1JlbW92YWJsZTtcbiAgICB9XG5cbiAgICBnZXQgaXNSZW1vdmFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNpc1JlbW92YWJsZTtcbiAgICB9XG4gICAgZ2V0IHRvZG9zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdG9kb3M7XG4gICAgfVxuICAgIHNldCB0b2Rvcyh2YWx1ZSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgfHxcbiAgICAgICAgICAgICF2YWx1ZS5ldmVyeSgoaXRlbSkgPT4gaXRlbSBpbnN0YW5jZW9mIFRvRG8pXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXJyYXkgbXVzdCBjb250YWluIG9ubHkgVG9EbyBvYmplY3RzIVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiN0b2RvcyA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldFRvRG9BbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvZG9zO1xuICAgIH1cbiAgICBnZXRUb0RvQnlJZCh0b2RvSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9kb3MuZmluZCgodCkgPT4gdC5pZCA9PT0gdG9kb0lkKSB8fCBudWxsO1xuICAgIH1cbiAgICBhZGRUb0RvKHRvZG8pIHtcbiAgICAgICAgdGhpcy50b2Rvcy5wdXNoKHRvZG8pO1xuICAgIH1cbiAgICByZW1vdmVUb0RvKHRvZG9JZCkge1xuICAgICAgICB0aGlzLnRvZG9zID0gdGhpcy50b2Rvcy5maWx0ZXIoKHQpID0+IHQuaWQgIT09IHRvZG9JZCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vbW9kZWwvcHJvamVjdC5qc1wiO1xuaW1wb3J0IFRvRG8gZnJvbSBcIi4vbW9kZWwvdG9kby5qc1wiO1xuXG4vLyA9PT09PSBBUFBMSUNBVElPTiBMT0dJQyAoQ09OVFJPTExFUiAmIFZJRVcpID09PT09XG5jb25zdCBBcHAgPSB7XG4gICAgLy8gLS0tIFNUQVRFIC0tLVxuICAgIHByb2plY3RzOiBbXSxcbiAgICBjdXJyZW50UHJvamVjdElkOiBudWxsLFxuICAgIGVkaXRpbmdUb2RvSWQ6IG51bGwsXG5cbiAgICAvLyAtLS0gRE9NIEVMRU1FTlRTIC0tLVxuICAgIGVsZW1lbnRzOiB7XG4gICAgICAgIHByb2plY3RzTGlzdDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0cy1saXN0XCIpLFxuICAgICAgICBuZXdQcm9qZWN0Rm9ybTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctcHJvamVjdC1mb3JtXCIpLFxuICAgICAgICBuZXdQcm9qZWN0TmFtZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctcHJvamVjdC1uYW1lXCIpLFxuICAgICAgICBwcm9qZWN0RGV0YWlsczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWRldGFpbHNcIiksXG4gICAgICAgIGN1cnJlbnRQcm9qZWN0VGl0bGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3VycmVudC1wcm9qZWN0LXRpdGxlXCIpLFxuICAgICAgICB0b2Rvc0NvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2Rvcy1jb250YWluZXJcIiksXG4gICAgICAgIGFkZFRvZG9CdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLXRvZG8tYnRuXCIpLFxuICAgICAgICB0b2RvTW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kby1tb2RhbFwiKSxcbiAgICAgICAgdG9kb0Zvcm06IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kby1mb3JtXCIpLFxuICAgICAgICBtb2RhbFRpdGxlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLXRpdGxlXCIpLFxuICAgICAgICBtb2RhbENsb3NlQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLWNsb3NlLWJ0blwiKSxcbiAgICAgICAgdG9kb0lkSW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kby1pZFwiKSxcbiAgICAgICAgdG9kb1RpdGxlSW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kby10aXRsZVwiKSxcbiAgICAgICAgdG9kb0Rlc2NyaXB0aW9uSW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kby1kZXNjcmlwdGlvblwiKSxcbiAgICAgICAgdG9kb0R1ZURhdGVJbnB1dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvLWR1ZS1kYXRlXCIpLFxuICAgICAgICB0b2RvUHJpb3JpdHlJbnB1dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvLXByaW9yaXR5XCIpLFxuICAgICAgICB0b2RvUHJvamVjdElucHV0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG8tcHJvamVjdFwiKSxcbiAgICAgICAgdG9kb05vdGVJbnB1dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvLW5vdGVcIiksXG4gICAgfSxcblxuICAgIC8vIC0tLSBJTklUSUFMSVpBVElPTiAtLS1cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLmxvYWREYXRhKCk7XG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH0sXG5cbiAgICAvLyAtLS0gREFUQSBIQU5ETElORyAtLS1cbiAgICBsb2FkRGF0YSgpIHtcbiAgICAgICAgLy8gVHJ5IHRvIGxvYWQgZnJvbSBsb2NhbFN0b3JhZ2UsIG90aGVyd2lzZSBjcmVhdGUgZGVmYXVsdCBkYXRhXG4gICAgICAgIGNvbnN0IHNhdmVkUHJvamVjdHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvZG9BcHBQcm9qZWN0c1wiKTtcbiAgICAgICAgaWYgKHNhdmVkUHJvamVjdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBKU09OLnBhcnNlKHNhdmVkUHJvamVjdHMpO1xuICAgICAgICAgICAgUHJvamVjdC5wcm9qZWN0c0FycmF5ID0gcGFyc2VkRGF0YS5tYXAoKHByb2pEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvamVjdCA9IG5ldyBQcm9qZWN0KFxuICAgICAgICAgICAgICAgICAgICBwcm9qRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBwcm9qRGF0YS5fUHJvamVjdF9faXNSZW1vdmFibGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHByb2plY3QuaWQgPSBwcm9qRGF0YS5pZDtcbiAgICAgICAgICAgICAgICBwcm9qZWN0LnRvZG9zID0gcHJvakRhdGEuX1Byb2plY3RfX3RvZG9zLm1hcCgodG9kb0RhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9kbyA9IG5ldyBUb0RvKFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb0RhdGEudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvRGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9EYXRhLmR1ZURhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvRGF0YS5wcmlvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9EYXRhLm5vdGVcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kby5pZCA9IHRvZG9EYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICB0b2RvLmlzQ29tcGxldGUgPSB0b2RvRGF0YS5pc0NvbXBsZXRlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9kbztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvamVjdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wcm9qZWN0cyA9IFByb2plY3QuZ2V0QWxsKCk7XG4gICAgICAgIGlmICh0aGlzLnByb2plY3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFByb2plY3QgPSBQcm9qZWN0LmNyZWF0ZURlZmF1bHQoXCJJbmJveFwiKTtcbiAgICAgICAgICAgIGNvbnN0IHRvZG8xID0gVG9Eby5jcmVhdGUoXG4gICAgICAgICAgICAgICAgXCJXZWxjb21lIVwiLFxuICAgICAgICAgICAgICAgIFwiVGhpcyBpcyB5b3VyIGZpcnN0IHRvLWRvLlwiLFxuICAgICAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF0sXG4gICAgICAgICAgICAgICAgXCJtZWRpdW1cIixcbiAgICAgICAgICAgICAgICBcIllvdSBjYW4gZWRpdCBvciBkZWxldGUgdGhpcy5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGRlZmF1bHRQcm9qZWN0LmFkZFRvRG8odG9kbzEpO1xuICAgICAgICAgICAgdGhpcy5wcm9qZWN0cyA9IFByb2plY3QuZ2V0QWxsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzYXZlZEN1cnJlbnRQcm9qZWN0SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcbiAgICAgICAgICAgIFwidG9kb0FwcEN1cnJlbnRQcm9qZWN0SWRcIlxuICAgICAgICApO1xuICAgICAgICB0aGlzLmN1cnJlbnRQcm9qZWN0SWQgPVxuICAgICAgICAgICAgc2F2ZWRDdXJyZW50UHJvamVjdElkICYmIFByb2plY3QuZ2V0QnlJZChzYXZlZEN1cnJlbnRQcm9qZWN0SWQpXG4gICAgICAgICAgICAgICAgPyBzYXZlZEN1cnJlbnRQcm9qZWN0SWRcbiAgICAgICAgICAgICAgICA6IHRoaXMucHJvamVjdHNbMF0uaWQ7XG4gICAgfSxcblxuICAgIHNhdmVEYXRhKCkge1xuICAgICAgICAvLyBVc2luZyBwcml2YXRlIGZpZWxkcyBpbiBKU09OLnN0cmluZ2lmeSBuZWVkcyBhIHJlcGxhY2VyIG9yIG1hbnVhbCBvYmplY3QgY3JlYXRpb24uXG4gICAgICAgIC8vIEl0J3Mgc2ltcGxlciB0byBjcmVhdGUgcGxhaW4gb2JqZWN0cyBmb3Igc2VyaWFsaXphdGlvbi5cbiAgICAgICAgY29uc3Qgc2VyaWFsaXphYmxlUHJvamVjdHMgPSB0aGlzLnByb2plY3RzLm1hcCgocCkgPT4gKHtcbiAgICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgICAgbmFtZTogcC5uYW1lLFxuICAgICAgICAgICAgX1Byb2plY3RfX2lzUmVtb3ZhYmxlOiBwLmlzUmVtb3ZhYmxlLFxuICAgICAgICAgICAgX1Byb2plY3RfX3RvZG9zOiBwLnRvZG9zLm1hcCgodCkgPT4gKHsgLi4udCB9KSksXG4gICAgICAgIH0pKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgICAgICBcInRvZG9BcHBQcm9qZWN0c1wiLFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoc2VyaWFsaXphYmxlUHJvamVjdHMpXG4gICAgICAgICk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9kb0FwcEN1cnJlbnRQcm9qZWN0SWRcIiwgdGhpcy5jdXJyZW50UHJvamVjdElkKTtcbiAgICB9LFxuXG4gICAgLy8gLS0tIEVWRU5UIEJJTkRJTkcgLS0tXG4gICAgYmluZEV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5uZXdQcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgXCJzdWJtaXRcIixcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTmV3UHJvamVjdC5iaW5kKHRoaXMpXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMucHJvamVjdHNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVByb2plY3RMaXN0Q2xpY2suYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmFkZFRvZG9CdG4uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlT3Blbk1vZGFsRm9yTmV3LmJpbmQodGhpcylcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5tb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy50b2RvTW9kYWwuY2xvc2UoKVxuICAgICAgICApO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLnRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICBcInN1Ym1pdFwiLFxuICAgICAgICAgICAgdGhpcy5oYW5kbGVUb2RvRm9ybVN1Ym1pdC5iaW5kKHRoaXMpXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMudG9kb3NDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVG9kb0FjdGlvbnMuYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgIH0sXG5cbiAgICAvLyAtLS0gRVZFTlQgSEFORExFUlMgLS0tXG4gICAgaGFuZGxlTmV3UHJvamVjdChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZWxlbWVudHMubmV3UHJvamVjdE5hbWUudmFsdWUudHJpbSgpO1xuICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgLy8gQWN0dWFsbHkgY3JlYXRlIHRoZSBwcm9qZWN0IGFuZCB1cGRhdGUgYm90aCBQcm9qZWN0LnByb2plY3RzQXJyYXkgYW5kIHRoaXMucHJvamVjdHNcbiAgICAgICAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSBQcm9qZWN0LmNyZWF0ZShuYW1lKTtcbiAgICAgICAgICAgIHRoaXMucHJvamVjdHMgPSBQcm9qZWN0LmdldEFsbCgpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UHJvamVjdElkID0gbmV3UHJvamVjdC5pZDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMubmV3UHJvamVjdE5hbWUudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBoYW5kbGVQcm9qZWN0TGlzdENsaWNrKGUpIHtcbiAgICAgICAgLy8gSGFuZGxlIHByb2plY3Qgc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IHByb2plY3RJdGVtID0gZS50YXJnZXQuY2xvc2VzdChcIltkYXRhLXByb2plY3QtaWRdXCIpO1xuICAgICAgICBpZiAocHJvamVjdEl0ZW0gJiYgIWUudGFyZ2V0LmNsb3Nlc3QoXCIuZGVsZXRlLXByb2plY3QtYnRuXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQcm9qZWN0SWQgPSBwcm9qZWN0SXRlbS5kYXRhc2V0LnByb2plY3RJZDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIYW5kbGUgcHJvamVjdCBkZWxldGlvblxuICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdChcIi5kZWxldGUtcHJvamVjdC1idG5cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RJdGVtID0gZS50YXJnZXQuY2xvc2VzdChcIltkYXRhLXByb2plY3QtaWRdXCIpO1xuICAgICAgICAgICAgaWYgKCFwcm9qZWN0SXRlbSkgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdElkID0gcHJvamVjdEl0ZW0uZGF0YXNldC5wcm9qZWN0SWQ7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0ID0gUHJvamVjdC5nZXRCeUlkKHByb2plY3RJZCk7XG4gICAgICAgICAgICBpZiAoIXByb2plY3QgfHwgIXByb2plY3QuaXNSZW1vdmFibGUpIHtcbiAgICAgICAgICAgICAgICAvLyBTaG91bGQgbm90IGJlIHBvc3NpYmxlIHRvIGRlbGV0ZSBkZWZhdWx0IHByb2plY3RcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY29uZmlybShcbiAgICAgICAgICAgICAgICAgICAgYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhlIHByb2plY3QgXCIke3Byb2plY3QubmFtZX1cIiBhbmQgYWxsIGl0cyB0by1kb3M/YFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBmcm9tIFByb2plY3QucHJvamVjdHNBcnJheSBkaXJlY3RseSwgc2luY2UgUHJvamVjdC5kZWxldGUgaXMgbm90IGEgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShQcm9qZWN0LnByb2plY3RzQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IFByb2plY3QucHJvamVjdHNBcnJheS5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgICAocCkgPT4gcC5pZCA9PT0gcHJvamVjdElkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9qZWN0LnByb2plY3RzQXJyYXkuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gdGhpcy5wcm9qZWN0c1xuICAgICAgICAgICAgICAgIHRoaXMucHJvamVjdHMgPSB0aGlzLnByb2plY3RzLmZpbHRlcigocCkgPT4gcC5pZCAhPT0gcHJvamVjdElkKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZGVsZXRlZCBwcm9qZWN0IHdhcyBzZWxlY3RlZCwgc3dpdGNoIHRvIHRoZSBmaXJzdCBhdmFpbGFibGUgcHJvamVjdFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQcm9qZWN0SWQgPT09IHByb2plY3RJZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQcm9qZWN0SWQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9qZWN0cy5sZW5ndGggPiAwID8gdGhpcy5wcm9qZWN0c1swXS5pZCA6IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaGFuZGxlT3Blbk1vZGFsRm9yTmV3KCkge1xuICAgICAgICB0aGlzLmVkaXRpbmdUb2RvSWQgPSBudWxsO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLm1vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBcIk5ldyBUby1Eb1wiO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLnRvZG9Gb3JtLnJlc2V0KCk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMudG9kb0lkSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnBvcHVsYXRlUHJvamVjdFNlbGVjdG9yKHRoaXMuY3VycmVudFByb2plY3RJZCk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMudG9kb01vZGFsLnNob3dNb2RhbCgpO1xuICAgIH0sXG5cbiAgICBoYW5kbGVUb2RvRm9ybVN1Ym1pdChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSB7XG4gICAgICAgICAgICB0aXRsZTogdGhpcy5lbGVtZW50cy50b2RvVGl0bGVJbnB1dC52YWx1ZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmVsZW1lbnRzLnRvZG9EZXNjcmlwdGlvbklucHV0LnZhbHVlLFxuICAgICAgICAgICAgZHVlRGF0ZTogdGhpcy5lbGVtZW50cy50b2RvRHVlRGF0ZUlucHV0LnZhbHVlLFxuICAgICAgICAgICAgcHJpb3JpdHk6IHRoaXMuZWxlbWVudHMudG9kb1ByaW9yaXR5SW5wdXQudmFsdWUsXG4gICAgICAgICAgICBub3RlOiB0aGlzLmVsZW1lbnRzLnRvZG9Ob3RlSW5wdXQudmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHRhcmdldFByb2plY3RJZCA9IHRoaXMuZWxlbWVudHMudG9kb1Byb2plY3RJbnB1dC52YWx1ZTtcblxuICAgICAgICBpZiAodGhpcy5lZGl0aW5nVG9kb0lkKSB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgVG9Eb1xuICAgICAgICAgICAgY29uc3Qgc291cmNlUHJvamVjdCA9IHRoaXMuZmluZFByb2plY3RCeVRvZG9JZCh0aGlzLmVkaXRpbmdUb2RvSWQpO1xuICAgICAgICAgICAgY29uc3QgdG9kbyA9IHNvdXJjZVByb2plY3QuZ2V0VG9Eb0J5SWQodGhpcy5lZGl0aW5nVG9kb0lkKTtcbiAgICAgICAgICAgIHRvZG8udXBkYXRlKGZvcm1EYXRhKTtcblxuICAgICAgICAgICAgLy8gTW92ZSBUb0RvIGlmIHByb2plY3QgY2hhbmdlZFxuICAgICAgICAgICAgaWYgKHNvdXJjZVByb2plY3QuaWQgIT09IHRhcmdldFByb2plY3RJZCkge1xuICAgICAgICAgICAgICAgIHNvdXJjZVByb2plY3QucmVtb3ZlVG9Ebyh0aGlzLmVkaXRpbmdUb2RvSWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFByb2plY3QgPSBQcm9qZWN0LmdldEJ5SWQodGFyZ2V0UHJvamVjdElkKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRQcm9qZWN0LmFkZFRvRG8odG9kbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgbmV3IFRvRG9cbiAgICAgICAgICAgIGNvbnN0IG5ld1RvZG8gPSBUb0RvLmNyZWF0ZShcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS50aXRsZSxcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5kdWVEYXRlLFxuICAgICAgICAgICAgICAgIGZvcm1EYXRhLnByaW9yaXR5LFxuICAgICAgICAgICAgICAgIGZvcm1EYXRhLm5vdGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0ID0gUHJvamVjdC5nZXRCeUlkKHRhcmdldFByb2plY3RJZCk7XG4gICAgICAgICAgICBwcm9qZWN0LmFkZFRvRG8obmV3VG9kbyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVsZW1lbnRzLnRvZG9Nb2RhbC5jbG9zZSgpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH0sXG5cbiAgICBoYW5kbGVUb2RvQWN0aW9ucyhlKSB7XG4gICAgICAgIGNvbnN0IHRvZG9DYXJkID0gZS50YXJnZXQuY2xvc2VzdChcIi50b2RvLWNhcmRcIik7XG4gICAgICAgIGlmICghdG9kb0NhcmQpIHJldHVybjtcblxuICAgICAgICBjb25zdCB0b2RvSWQgPSB0b2RvQ2FyZC5kYXRhc2V0LnRvZG9JZDtcbiAgICAgICAgY29uc3QgcHJvamVjdCA9IHRoaXMuZmluZFByb2plY3RCeVRvZG9JZCh0b2RvSWQpO1xuXG4gICAgICAgIC8vIEhhbmRsZSBEZWxldGVcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoXCIuZGVsZXRlLXRvZG8tYnRuXCIpKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyB0by1kbz9cIikpIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0LnJlbW92ZVRvRG8odG9kb0lkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIEVkaXRcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoXCIuZWRpdC10b2RvLWJ0blwiKSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0aW5nVG9kb0lkID0gdG9kb0lkO1xuICAgICAgICAgICAgY29uc3QgdG9kbyA9IHByb2plY3QuZ2V0VG9Eb0J5SWQodG9kb0lkKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMubW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IFwiRWRpdCBUby1Eb1wiO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy50b2RvSWRJbnB1dC52YWx1ZSA9IHRvZG8uaWQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLnRvZG9UaXRsZUlucHV0LnZhbHVlID0gdG9kby50aXRsZTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMudG9kb0Rlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB0b2RvLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy50b2RvRHVlRGF0ZUlucHV0LnZhbHVlID0gdG9kby5kdWVEYXRlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy50b2RvUHJpb3JpdHlJbnB1dC52YWx1ZSA9IHRvZG8ucHJpb3JpdHk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLnRvZG9Ob3RlSW5wdXQudmFsdWUgPSB0b2RvLm5vdGU7XG4gICAgICAgICAgICB0aGlzLnBvcHVsYXRlUHJvamVjdFNlbGVjdG9yKHByb2plY3QuaWQpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy50b2RvTW9kYWwuc2hvd01vZGFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIYW5kbGUgVG9nZ2xlIENvbXBsZXRlXG4gICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KFwiLnRvZ2dsZS1jb21wbGV0ZS1idG5cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvZG8gPSBwcm9qZWN0LmdldFRvRG9CeUlkKHRvZG9JZCk7XG4gICAgICAgICAgICB0b2RvLnRvZ2dsZUNvbXBsZXRlKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIEV4cGFuZC9Db2xsYXBzZVxuICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdChcIi50b2RvLWhlYWRlclwiKSkge1xuICAgICAgICAgICAgY29uc3QgZGV0YWlscyA9IHRvZG9DYXJkLnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1kZXRhaWxzXCIpO1xuICAgICAgICAgICAgaWYgKGRldGFpbHMpIGRldGFpbHMuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyAtLS0gVVRJTElUWSBNRVRIT0RTIC0tLVxuICAgIGZpbmRQcm9qZWN0QnlUb2RvSWQodG9kb0lkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RzLmZpbmQoKHApID0+IHAuZ2V0VG9Eb0J5SWQodG9kb0lkKSk7XG4gICAgfSxcblxuICAgIHBvcHVsYXRlUHJvamVjdFNlbGVjdG9yKHNlbGVjdGVkUHJvamVjdElkKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMudG9kb1Byb2plY3RJbnB1dC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICB0aGlzLnByb2plY3RzLmZvckVhY2goKHApID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBwLmlkO1xuICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gcC5uYW1lO1xuICAgICAgICAgICAgaWYgKHAuaWQgPT09IHNlbGVjdGVkUHJvamVjdElkKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMudG9kb1Byb2plY3RJbnB1dC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gLS0tIFJFTkRFUiBNRVRIT0RTIC0tLVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9qZWN0cygpO1xuICAgICAgICB0aGlzLnJlbmRlclRvZG9zKCk7XG4gICAgICAgIHRoaXMuc2F2ZURhdGEoKTtcbiAgICB9LFxuXG4gICAgcmVuZGVyUHJvamVjdHMoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMucHJvamVjdHNMaXN0LmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIHRoaXMucHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBwcm9qZWN0LmlkID09PSB0aGlzLmN1cnJlbnRQcm9qZWN0SWQ7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVDbGFzc2VzID0gaXNBY3RpdmVcbiAgICAgICAgICAgICAgICA/IFwiYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTYwMCBmb250LXNlbWlib2xkXCJcbiAgICAgICAgICAgICAgICA6IFwiaG92ZXI6Ymctc2xhdGUtMTAwXCI7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICBwcm9qZWN0RWwuZGF0YXNldC5wcm9qZWN0SWQgPSBwcm9qZWN0LmlkO1xuICAgICAgICAgICAgcHJvamVjdEVsLmNsYXNzTmFtZSA9IGBwLTIgcm91bmRlZC1tZCBjdXJzb3ItcG9pbnRlciB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gZ2FwLTIgJHthY3RpdmVDbGFzc2VzfWA7XG4gICAgICAgICAgICAvLyBQcm9qZWN0IG5hbWUgc3BhbiBmb3IgY2xpY2sgc2VsZWN0aW9uXG4gICAgICAgICAgICBjb25zdCBuYW1lU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgbmFtZVNwYW4udGV4dENvbnRlbnQgPSBwcm9qZWN0Lm5hbWU7XG4gICAgICAgICAgICBuYW1lU3Bhbi5jbGFzc05hbWUgPSBcImZsZXgtMVwiO1xuICAgICAgICAgICAgcHJvamVjdEVsLmFwcGVuZENoaWxkKG5hbWVTcGFuKTtcblxuICAgICAgICAgICAgLy8gQWRkIGRlbGV0ZSBidXR0b24gaWYgcHJvamVjdCBpcyByZW1vdmFibGUgKG5vdCBkZWZhdWx0KVxuICAgICAgICAgICAgaWYgKHByb2plY3QuaXNSZW1vdmFibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bi5jbGFzc05hbWUgPVxuICAgICAgICAgICAgICAgICAgICBcImRlbGV0ZS1wcm9qZWN0LWJ0biBtbC0yIHAtMSB0ZXh0LXNsYXRlLTQwMCBob3Zlcjp0ZXh0LXJlZC02MDAgdHJhbnNpdGlvbi1jb2xvcnNcIjtcbiAgICAgICAgICAgICAgICBkZWxldGVCdG4udGl0bGUgPSBcIkRlbGV0ZSBwcm9qZWN0XCI7XG4gICAgICAgICAgICAgICAgZGVsZXRlQnRuLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJoLTQgdy00XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTkgMmExIDEgMCAwMC0uODk0LjU1M0w3LjM4MiA0SDRhMSAxIDAgMDAwIDJ2MTBhMiAyIDAgMDAyIDJoOGEyIDIgMCAwMDItMlY2YTEgMSAwIDEwMC0yaC0zLjM4MmwtLjcyNC0xLjQ0N0ExIDEgMCAwMDExIDJIOXpNNyA4YTEgMSAwIDAxMiAwdjZhMSAxIDAgMTEtMiAwVjh6bTQgMGExIDEgMCAwMTIgMHY2YTEgMSAwIDExLTIgMFY4elwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgIHByb2plY3RFbC5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLnByb2plY3RzTGlzdC5hcHBlbmRDaGlsZChwcm9qZWN0RWwpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVuZGVyVG9kb3MoKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3QgPSBQcm9qZWN0LmdldEJ5SWQodGhpcy5jdXJyZW50UHJvamVjdElkKTtcbiAgICAgICAgaWYgKCFwcm9qZWN0KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmN1cnJlbnRQcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPVxuICAgICAgICAgICAgICAgIFwiTm8gUHJvamVjdCBTZWxlY3RlZFwiO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy50b2Rvc0NvbnRhaW5lci5pbm5lckhUTUwgPVxuICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cInRleHQtc2xhdGUtNTAwXCI+U2VsZWN0IGEgcHJvamVjdCB0byBzZWUgeW91ciB0by1kb3MuPC9wPic7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVsZW1lbnRzLmN1cnJlbnRQcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBwcm9qZWN0Lm5hbWU7XG4gICAgICAgIHRoaXMuZWxlbWVudHMudG9kb3NDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgICAgICBpZiAocHJvamVjdC5nZXRUb0RvQWxsKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLnRvZG9zQ29udGFpbmVyLmlubmVySFRNTCA9XG4gICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwidGV4dC1zbGF0ZS01MDAgdGV4dC1jZW50ZXIgbXQtOFwiPk5vIHRvLWRvcyBpbiB0aGlzIHByb2plY3QuIEFkZCBvbmUhPC9wPic7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwcm9qZWN0XG4gICAgICAgICAgICAuZ2V0VG9Eb0FsbCgpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYS5kdWVEYXRlKSAtIG5ldyBEYXRlKGIuZHVlRGF0ZSkpXG4gICAgICAgICAgICAuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByaW9yaXR5Q2xhc3NlcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaDogXCJib3JkZXItcmVkLTQwMFwiLFxuICAgICAgICAgICAgICAgICAgICBtZWRpdW06IFwiYm9yZGVyLXllbGxvdy00MDBcIixcbiAgICAgICAgICAgICAgICAgICAgbG93OiBcImJvcmRlci1ncmVlbi00MDBcIixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzT3ZlcmR1ZSA9XG4gICAgICAgICAgICAgICAgICAgICF0b2RvLmlzQ29tcGxldGUgJiZcbiAgICAgICAgICAgICAgICAgICAgdG9kby5kdWVEYXRlICYmXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRvZG8uZHVlRGF0ZSkgPCBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJkdWVDbGFzcyA9IGlzT3ZlcmR1ZSA/IFwiYmctcmVkLTUwXCIgOiBcIlwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZENsYXNzID0gdG9kby5pc0NvbXBsZXRlXG4gICAgICAgICAgICAgICAgICAgID8gXCJvcGFjaXR5LTYwIGxpbmUtdGhyb3VnaFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCJcIjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9DYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICB0b2RvQ2FyZC5jbGFzc05hbWUgPSBgdG9kby1jYXJkIGJvcmRlci1sLTQgcC00IHJvdW5kZWQtbWQgYmctd2hpdGUgc2hhZG93LXNtIHRyYW5zaXRpb24tYWxsICR7XG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5Q2xhc3Nlc1t0b2RvLnByaW9yaXR5XVxuICAgICAgICAgICAgICAgIH0gJHtvdmVyZHVlQ2xhc3N9YDtcbiAgICAgICAgICAgICAgICB0b2RvQ2FyZC5kYXRhc2V0LnRvZG9JZCA9IHRvZG8uaWQ7XG5cbiAgICAgICAgICAgICAgICBsZXQgZm9ybWF0dGVkRGF0ZSA9IFwiTm8gZHVlIGRhdGVcIjtcbiAgICAgICAgICAgICAgICBpZiAodG9kby5kdWVEYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWREYXRlID0gd2luZG93LmRhdGVGbnMuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRvZG8uZHVlRGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJNTU0gZGQsIHl5eXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBmb3JtYXQgZGF0ZTpcIiwgdG9kby5kdWVEYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRvZG9DYXJkLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2RvLWhlYWRlciBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydCBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidG9nZ2xlLWNvbXBsZXRlLWJ0biB0ZXh0LXhsXCI+JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG8uaXNDb21wbGV0ZSA/IFwi4pyFXCIgOiBcIvCflLJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCIke2NvbXBsZXRlZENsYXNzfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWxnXCI+JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RvLnRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1zbSB0ZXh0LXNsYXRlLTUwMFwiPiR7Zm9ybWF0dGVkRGF0ZX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10b2RvLWJ0biBwLTEgdGV4dC1zbGF0ZS01MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCB0cmFuc2l0aW9uLWNvbG9yc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJoLTUgdy01XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj48cGF0aCBkPVwiTTE3LjQxNCAyLjU4NmEyIDIgMCAwMC0yLjgyOCAwTDcgMTAuMTcyVjEzaDIuODI4bDcuNTg2LTcuNTg2YTIgMiAwIDAwMC0yLjgyOHpcIiAvPjxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTIgNmEyIDIgMCAwMTItMmg0YTEgMSAwIDAxMCAySDR2MTBoMTB2LTRhMSAxIDAgMTEyIDB2NGEyIDIgMCAwMS0yIDJINGEyIDIgMCAwMS0yLTJWNnpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIgLz48L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkZWxldGUtdG9kby1idG4gcC0xIHRleHQtc2xhdGUtNTAwIGhvdmVyOnRleHQtcmVkLTYwMCB0cmFuc2l0aW9uLWNvbG9yc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJoLTUgdy01XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj48cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk05IDJhMSAxIDAgMDAtLjg5NC41NTNMNy4zODIgNEg0YTEgMSAwIDAwMCAydjEwYTIgMiAwIDAwMiAyaDhhMiAyIDAgMDAyLTJWNmExIDEgMCAxMDAtMmgtMy4zODJsLS43MjQtMS40NDdBMSAxIDAgMDAxMSAySDl6TTcgOGExIDEgMCAwMTIgMHY2YTEgMSAwIDExLTIgMFY4em00IDBhMSAxIDAgMDEyIDB2NmExIDEgMCAxMS0yIDBWOHpcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIgLz48L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2RvLWRldGFpbHMgaGlkZGVuIG10LTQgcGwtMTAgYm9yZGVyLXQgcHQtNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtc2xhdGUtNjAwIG1iLTJcIj4ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9kby5kZXNjcmlwdGlvbiB8fCBcIk5vIGRlc2NyaXB0aW9uLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RvLm5vdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGA8cCBjbGFzcz1cInRleHQtc20gYmcteWVsbG93LTEwMCBwLTIgcm91bmRlZC1tZFwiPjxzdHJvbmc+Tm90ZTo8L3N0cm9uZz4gJHt0b2RvLm5vdGV9PC9wPmBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy50b2Rvc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2RvQ2FyZCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9LFxufTtcblxuLy8gLS0tIFN0YXJ0IHRoZSBhcHBsaWNhdGlvbiAtLS1cbkFwcC5pbml0KCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///74\n\n}')}},__webpack_exports__={};__webpack_modules__[74]()})();